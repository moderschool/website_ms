<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern School Kota - Career Portal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>

    <!-- Google Sign-In SDK -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>

    <style>
        :root {
            --msk-maroon: #8B1A3B;
            --msk-light-maroon: #A52A4A;
            --msk-cream: #F5F5DC;
            --msk-light-cream: #FFF8DC;
            --msk-dark: #5A0F25;
            --msk-light: #f9f9f7;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--msk-light);
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, var(--msk-cream), var(--msk-light-cream));
            color: var(--msk-dark);
            padding: 25px 0;
            text-align: center;
            margin-bottom: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(139, 26, 59, 0.1);
        }

        .school-logo img {
            height: 100px;
           
        }

        header h2 {
            font-size: 1.8rem;
            margin: 15px 0 8px;
            font-weight: 600;
            color: var(--msk-dark);
        }

        header p {
            font-size: 1.1rem;
            color: var(--msk-light-maroon);
        }

        .filter-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 25px;
            border: none;
            border-radius: 30px;
            background-color: #e0e0e0;
            color: #555;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn.active {
            background-color: var(--msk-maroon);
            color: white;
        }

        .filter-btn:hover { background-color: #d0d0d0; }
        .filter-btn.active:hover { background-color: var(--msk-dark); }

        .jobs-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 40px;
        }

        .job-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            height: 240px;
            border-left: 5px solid var(--msk-maroon);
        }

        .job-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }

        .job-image {
            width: 140px;
            background: linear-gradient(135deg, var(--msk-maroon), var(--msk-light-maroon));
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px;
        }

        .job-image i {
            font-size: 2.5rem;
            color: white;
        }

        .job-content {
            flex: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }

        .job-header {
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .job-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--msk-dark);
            margin-bottom: 5px;
        }

        .job-company {
            font-size: 1rem;
            color: #7f8c8d;
            margin-bottom: 8px;
        }

        .job-type {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .academic {
            background-color: #e8f6f3;
            color: #16a085;
            border: 1px solid #16a085;
        }

        .non-academic {
            background-color: #fef9e7;
            color: #f39c12;
            border: 1px solid #f39c12;
        }

        .job-description {
            color: #555;
            margin-bottom: 10px;
            font-size: 0.9rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .job-details {
            display: flex;
            justify-content: space-between;
            color: #7f8c8d;
            font-size: 0.85rem;
            margin-bottom: 10px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .job-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
        }

        .view-details {
            color: var(--msk-maroon);
            text-decoration: none;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
        }

        .view-details:hover { color: var(--msk-dark); }

        .apply-btn {
            background: linear-gradient(135deg, var(--msk-maroon), var(--msk-light-maroon));
            color: white;
            border: none;
            padding: 8px 18px;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
        }

        .apply-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.7);
            z-index: 1000;
            overflow-y: auto;
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            width: 90%;
            max-width: 600px;
            border-radius: 10px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.2);
            animation: modalFade 0.3s;
        }

        @keyframes modalFade {
            from {opacity: 0; transform: translateY(-30px);}
            to {opacity: 1; transform: translateY(0);}
        }

        .modal-header {
            padding: 20px 30px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, var(--msk-maroon), var(--msk-light-maroon));
            color: white;
            border-radius: 10px 10px 0 0;
        }

        .close-btn {
            font-size: 1.8rem;
            cursor: pointer;
            font-weight: bold;
        }

        .close-btn:hover { color: var(--msk-cream); }

        .modal-body { padding: 30px; }

        .form-group { margin-bottom: 20px; }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--msk-dark);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }

        .form-control:focus {
            border-color: var(--msk-maroon);
            outline: none;
            box-shadow: 0 0 0 2px rgba(139,26,59,0.2);
        }

        .submit-btn, .proceed-btn {
            background: linear-gradient(135deg, var(--msk-maroon), var(--msk-light-maroon));
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
        }

        .submit-btn:hover, .proceed-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        /* Social Login Buttons */
        .social-login-divider {
            text-align: center;
            margin: 25px 0;
            position: relative;
            color: #777;
            font-size: 0.9rem;
        }
        .social-login-divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0; right: 0;
            height: 1px;
            background: #ddd;
        }
        .social-login-divider span {
            background: white;
            padding: 0 15px;
        }

        .social-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            width: 100%;
            padding: 14px;
            margin-bottom: 12px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1rem;
        }

        .google-btn {
            border: 2px solid #4285f4;
            color: #4285f4;
            background: white;
        }
        .linkedin-btn {
            border: 2px solid #0077b5;
            color: #0077b5;
            background: white;
        }

        .social-btn:hover {
            background-color: #f8f9fa;
            transform: translateY(-2px);
        }

        .otp-inputs {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }

        .otp-input {
            width: 50px;
            height: 50px;
            text-align: center;
            font-size: 1.3rem;
            border: 1px solid #ddd;
            border-radius: 6px;
        }

        .resend-otp {
            color: var(--msk-maroon);
            text-align: center;
            cursor: pointer;
            margin-top: 10px;
        }

        .resend-otp:hover { text-decoration: underline; }

        @media (max-width: 768px) {
            .job-card { flex-direction: column; height: auto; }
            .job-image { width: 100%; }
            .filter-section { flex-direction: column; }
            .modal-content { width: 95%; margin: 10% auto; }
        }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <div class="school-logo">
                <img src="ms_logo.png" alt="Modern School Kota Logo">
            </div>
            <h2>Career Opportunities</h2>
            <p>Join our team of dedicated educators and staff</p>
        </header>

        <div class="filter-section">
            <button class="filter-btn active" data-filter="all">All Jobs</button>
            <button class="filter-btn" data-filter="academic">Academic</button>
            <button class="filter-btn" data-filter="non-academic">Non-Academic</button>
        </div>

        <div class="jobs-container" id="jobsContainer"></div>
    </div>

    <!-- Job Details Modal -->
    <div class="modal" id="jobModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalJobTitle">Job Title</h2>
                <span class="close-btn" id="closeModal">×</span>
            </div>
            <div class="modal-body">
                <div class="job-meta-details" id="modalJobMeta"></div>
                <div class="job-full-description" id="modalJobDescription"></div>
                <div class="job-requirements" id="modalJobRequirements"></div>
            </div>
            <div class="modal-footer" style="padding:20px 30px; border-top:1px solid #eee; text-align:right;">
                <button class="apply-btn" id="applyForJob">Apply Now</button>
            </div>
        </div>
    </div>

    <!-- Login / Verification Modal -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Verify Your Identity</h2>
                <span class="close-btn" id="closeLoginModal">×</span>
            </div>
            <div class="modal-body">

                <!-- Social Login Buttons -->
                <button class="social-btn google-btn" id="googleSignInBtn">
                    <img src="https://developers.google.com/identity/images/g-logo.png" width="20" height="20" alt="Google">
                    Continue with Google
                </button>

                <button class="social-btn linkedin-btn" id="linkedinSignInBtn">
                    <i class="fab fa-linkedin-in"></i> Continue with LinkedIn
                </button>

                <div class="social-login-divider"><span>OR</span></div>

                <!-- Email + OTP Flow -->
                <div class="login-form" id="emailForm">
                    <div class="form-group">
                        <label for="applicantEmail">Email Address</label>
                        <input type="email" id="applicantEmail" class="form-control" placeholder="Enter your email" required>
                    </div>
                    <div class="g-recaptcha" data-sitekey="6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI"></div>
                    <button class="submit-btn" id="sendOtpBtn">Send OTP</button>
                </div>

                <div class="otp-section" id="otpSection" style="display:none;">
                    <label>Enter 6-digit OTP</label>
                    <div class="otp-inputs">
                        <input type="text" class="otp-input" maxlength="1" data-index="0">
                        <input type="text" class="otp-input" maxlength="1" data-index="1">
                        <input type="text" class="otp-input" maxlength="1" data-index="2">
                        <input type="text" class="otp-input" maxlength="1" data-index="3">
                        <input type="text" class="otp-input" maxlength="1" data-index="4">
                        <input type="text" class="otp-input" maxlength="1" data-index="5">
                    </div>
                    <button class="submit-btn" id="verifyOtpBtn">Verify OTP</button>
                    <p class="resend-otp" id="resendOtp">Resend OTP</p>
                </div>

                <div class="proceed-section" id="proceedSection" style="display:none; text-align:center;">
                    <h3 style="color:green;">Verified Successfully!</h3>
                    <p id="verifiedMessage">You can now proceed to the application form</p>
                    <button class="proceed-btn" id="proceedBtn">Proceed to Application</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // === REPLACE THESE TWO KEYS BEFORE GOING LIVE ===
        const GOOGLE_CLIENT_ID = "YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com";  // Get from Google Cloud Console
        const LINKEDIN_CLIENT_ID = "YOUR_LINKEDIN_CLIENT_ID";                         // Get from LinkedIn Developer Portal

        const jobs = [/* your existing jobs array - unchanged */ 
            { id: 1, title: "Mathematics Teacher", company: "Modern School Kota", type: "academic", location: "Kota, Rajasthan", datePosted: "2025-11-01", posts: 2, experience: "3-5 years", description: "Passionate Mathematics Teacher required...", fullDescription: "Detailed description...", requirements: ["M.Sc. Mathematics", "B.Ed.", "3+ years experience"], icon: "fas fa-square-root-alt" },
            { id: 2, title: "Science Teacher (Physics)", company: "Modern School Kota", type: "academic", location: "Kota, Rajasthan", datePosted: "2025-11-05", posts: 1, experience: "2-4 years", description: "Experienced Physics Teacher...", fullDescription: "...", requirements: ["M.Sc. Physics", "B.Ed."], icon: "fas fa-atom" },
            { id: 3, title: "Administrative Coordinator", company: "Modern School Kota", type: "non-academic", location: "Kota, Rajasthan", datePosted: "2025-11-10", posts: 1, experience: "1-3 years", description: "Organized admin professional...", fullDescription: "...", requirements: ["Any Graduate", "MS Office"], icon: "fas fa-clipboard-list" },
            { id: 4, title: "IT Support Specialist", company: "Modern School Kota", type: "non-academic", location: "Kota, Rajasthan", datePosted: "2025-11-12", posts: 1, experience: "2-4 years", description: "Technical support for school IT...", fullDescription: "...", requirements: ["B.Tech CS", "Networking"], icon: "fas fa-laptop-medical" },
            { id: 5, title: "Counselor", company: "Modern School Kota", type: "academic", location: "Kota, Rajasthan", datePosted: "2025-11-15", posts: 1, experience: "3-5 years", description: "Compassionate counselor needed...", fullDescription: "...", requirements: ["MA Psychology", "Counseling Cert."], icon: "fas fa-hands-helping" }
        ];

        // DOM Elements
        const jobsContainer = document.getElementById('jobsContainer');
        const jobModal = document.getElementById('jobModal');
        const loginModal = document.getElementById('loginModal');
        const closeModal = document.getElementById('closeModal');
        const closeLoginModal = document.getElementById('closeLoginModal');
        const applyForJobBtn = document.getElementById('applyForJob');
        const googleSignInBtn = document.getElementById('googleSignInBtn');
        const linkedinSignInBtn = document.getElementById('linkedinSignInBtn');

        let currentJob = null;
        let userEmail = '';
        const demoOtp = '123456';

        function formatDate(dateStr) {
            return new Date(dateStr).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
        }

        function displayJobs(jobList) {
            jobsContainer.innerHTML = jobList.length === 0 
                ? '<p style="text-align:center;padding:50px;color:#777;">No jobs found.</p>'
                : jobList.map(job => `
                    <div class="job-card">
                        <div class="job-image"><i class="${job.icon}"></i></div>
                        <div class="job-content">
                            <div class="job-header">
                                <div>
                                    <h3 class="job-title">${job.title}</h3>
                                    <p class="job-company">${job.company}</p>
                                </div>
                                <span class="job-type ${job.type}">${job.type === 'academic' ? 'Academic' : 'Non-Academic'}</span>
                            </div>
                            <div class="job-body">
                                <p class="job-description">${job.description}</p>
                                <div class="job-details">
                                    <div class="detail-item"><i class="far fa-calendar-alt"></i> <span>${formatDate(job.datePosted)}</span></div>
                                    <div class="detail-item"><i class="fas fa-users"></i> <span>Posts: ${job.posts}</span></div>
                                    <div class="detail-item"><i class="fas fa-briefcase"></i> <span>${job.experience}</span></div>
                                </div>
                                <div class="job-footer">
                                    <a class="view-details" data-job-id="${job.id}">View Details</a>
                                    <button class="apply-btn" data-job-id="${job.id}">Apply Now</button>
                                </div>
                            </div>
                        </div>
                    </div>
                `).join('');
        }

        function showJobDetails(id) {
            currentJob = jobs.find(j => j.id === id);
            if (!currentJob) return;
            document.getElementById('modalJobTitle').textContent = currentJob.title;
            document.getElementById('modalJobMeta').innerHTML = `
                <div style="display:flex;gap:20px;flex-wrap:wrap;margin-bottom:20px;">
                    <div><strong>Posted:</strong> ${formatDate(currentJob.datePosted)}</div>
                    <div><strong>Posts:</strong> ${currentJob.posts}</div>
                    <div><strong>Experience:</strong> ${currentJob.experience}</div>
                    <div><strong>Location:</strong> ${currentJob.location}</div>
                </div>`;
            document.getElementById('modalJobDescription').textContent = currentJob.fullDescription;
            document.getElementById('modalJobRequirements').innerHTML = `<h3>Requirements</h3><ul>${currentJob.requirements.map(r => `<li>${r}</li>`).join('')}</ul>`;
            jobModal.style.display = 'block';
        }

        function showLoginForm(id) {
            currentJob = jobs.find(j => j.id === id);
            loginModal.style.display = 'block';
        }

        function completeVerification(message) {
            document.getElementById('emailForm').style.display = 'none';
            document.getElementById('otpSection').style.display = 'none';
            document.getElementById('proceedSection').style.display = 'block';
            document.getElementById('verifiedMessage').innerHTML = message;
        }

        // Google Sign-In
        function handleGoogleResponse(response) {
            const data = JSON.parse(atob(response.credential.split('.')[1]));
            userEmail = data.email;
            completeVerification(`Logged in as <strong>${data.name}</strong><br><small>${data.email}</small>`);
        }

        // LinkedIn Login (redirect flow)
        function linkedinLogin() {
            const redirectUri = encodeURIComponent(location.href.split('?')[0]);
            const state = Math.random().toString(36).substring(7);
            const url = `https://www.linkedin.com/oauth/v2/authorization?response_type=code&client_id=${LINKEDIN_CLIENT_ID}&redirect_uri=${redirectUri}&scope=r_liteprofile%20r_emailaddress&state=${state}`;
            location.href = url;
        }

        // Check for LinkedIn callback
        const urlParams = new URLSearchParams(location.search);
        if (urlParams.get('code')) {
            // In production: send code to your backend
            completeVerification(`Successfully logged in with LinkedIn`);
            history.replaceState({}, '', location.pathname);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            displayJobs(jobs);

            // Filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    const filter = btn.dataset.filter;
                    const filtered = filter === 'all' ? jobs : jobs.filter(j => j.type === filter);
                    displayJobs(filtered);
                });
            });

            // Job actions
            jobsContainer.addEventListener('click', e => {
                const target = e.target.closest('.view-details, .apply-btn');
                if (!target) return;
                const id = parseInt(target.dataset.jobId);
                if (e.target.closest('.view-details')) showJobDetails(id);
                else showLoginForm(id);
            });

            // Modal closes
            closeModal.onclick = () => jobModal.style.display = 'none';
            closeLoginModal.onclick = () => { loginModal.style.display = 'none'; document.getElementById('emailForm').style.display = 'block'; document.getElementById('otpSection').style.display = 'none'; document.getElementById('proceedSection').style.display = 'none'; };
            window.onclick = e => { if (e.target === jobModal) jobModal.style.display = 'none'; if (e.target === loginModal) closeLoginModal.click(); };

            applyForJobBtn.onclick = () => { jobModal.style.display = 'none'; showLoginForm(currentJob.id); };

            // Social logins
            googleSignInBtn.onclick = () => google.accounts.id.prompt();
            linkedinSignInBtn.onclick = linkedinLogin;

            // Google One Tap + Button
            google.accounts.id.initialize({
                client_id: GOOGLE_CLIENT_ID,
                callback: handleGoogleResponse
            });
            google.accounts.id.renderButton(googleSignInBtn, { theme: "outline", size: "large", text: "continue_with", width: "100%" });

            // OTP flow (demo)
            document.getElementById('sendOtpBtn').onclick = () => {
                const email = document.getElementById('applicantEmail').value;
                if (!email.includes('@')) return alert('Enter valid email');
                userEmail = email;
                alert(`Demo OTP sent to ${email}: ${demoOtp}`);
                document.getElementById('emailForm').style.display = 'none';
                document.getElementById('otpSection').style.display = 'block';
            };

            document.getElementById('verifyOtpBtn').onclick = () => {
                const entered = Array.from(document.querySelectorAll('.otp-input')).map(i => i.value).join('');
                if (entered === demoOtp) {
                    completeVerification(`OTP verified for <strong>${userEmail}</strong>`);
                } else {
                    alert('Wrong OTP');
                    document.querySelectorAll('.otp-input').forEach(i => i.value = '');
                }
            };

            document.getElementById('resendOtp').onclick = () => alert(`Resent! OTP: ${demoOtp}`);

            document.getElementById('proceedBtn').onclick = () => {
                alert(`Redirecting to application form for: ${currentJob.title}\nEmail: ${userEmail}`);
                loginModal.style.display = 'none';
                // window.location.href = 'application-form.html';
            };

            // OTP auto-focus
            document.querySelectorAll('.otp-input').forEach((input, idx, arr) => {
                input.oninput = () => { if (input.value && idx < 5) arr[idx+1].focus(); };
                input.onkeydown = e => { if (e.key === 'Backspace' && !input.value && idx > 0) arr[idx-1].focus(); };
            });
        });
    </script>
</body>
</html>