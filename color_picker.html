<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fully Functional Theme Selector</title>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        /* --- 1. CSS STYLES (Functional Colors) --- */
        
        :root {
            /* Functional Color Variables - Default: Mint Lavender */
            --color-primary: #85C7B8;       /* Brand Accent (Medium Light) */
            --color-secondary: #C3B6E9;     /* Secondary Accent (Lavender) */
            --color-text: #2c3e50;          /* Dark Text */
            --color-surface: #FFFFFF;       /* Card/Control Background */
            --color-background: #F4F8F9;    /* Body Background (Very Light) */
            
            /* Derived Variables */
            --color-border: #E9ECEF;
            --color-light-text: #FFFFFF; /* Used for text on dark primary backgrounds if needed */
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--color-background); /* Functional Background */
            color: var(--color-text); /* Functional Text */
            line-height: 1.6;
            transition: background-color 0.3s;
        }

        /* --- APPLYING THE THEME --- */

        /* Primary Component (e.g., Header, Main Buttons) */
        .primary-bg {
            background-color: var(--color-primary);
            color: var(--color-text); /* Use dark text on light/medium primary backgrounds */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        /* Secondary Component (e.g., Accent elements) */
        .secondary-bg {
            background-color: var(--color-secondary);
            color: var(--color-text);
        }

        /* Surface/Card Component */
        .card {
            background-color: var(--color-surface); /* Functional Surface */
            color: var(--color-text);
            /* Existing styles... */
            padding: 30px;
            margin-bottom: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            transition: background-color 0.3s, color 0.3s, box-shadow 0.3s;
        }

        .primary-text {
            color: var(--color-primary);
        }

        /* --- LAYOUT AND COMPONENTS --- */

        header {
            padding: 40px 20px;
            text-align: center;
            margin-bottom: 20px;
        }

        main {
            padding: 20px;
            max-width: 900px;
            margin: 0 auto;
        }

        .controls {
            background-color: var(--color-surface); /* Functional Surface */
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.05);
            text-align: center;
        }
        
        #openThemeModal {
            padding: 12px 25px;
            font-size: 1.1em;
            font-weight: 600;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            background-color: var(--color-primary); 
            color: var(--color-text);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        button.demo-btn { 
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            margin-right: 10px;
            margin-top: 15px;
            cursor: pointer;
            font-weight: 600;
        }

        /* SweetAlert Custom Styles */
        .theme-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            max-width: 500px;
            margin: 20px auto 0;
        }
        .theme-option {
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
            text-align: center;
            font-weight: 500;
        }
        .theme-option.selected {
            border: 2px solid var(--color-primary); 
            box-shadow: 0 0 0 3px var(--color-primary);
        }
        .color-swatches {
            display: flex;
            justify-content: center;
            margin-top: 5px;
        }
        .swatch {
            width: 25px;
            height: 10px;
            margin: 0 2px;
            border-radius: 2px;
            border: 1px solid rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>

    <header class="primary-bg">
        <h1>Fully Functional Theme Selector</h1>
    </header>

    <main>
        <div class="controls">
            <h2>Choose Your Functional Theme</h2>
            <p>Click below to open the modal and see how the primary, secondary, text, surface, and background colors all change.</p>
            <button id="openThemeModal">ðŸŒˆ Open Theme Chooser</button>
        </div>

        <section class="card">
            <h3 class="primary-text">Card Surface (Uses **--color-surface**)</h3>
            <p>The **Body Background** is set to a very light color (`--color-background`). This card's background is the slightly more saturated `var(--color-surface)`.</p>
            <button class="demo-btn primary-bg">Primary Action</button>
            <button class="demo-btn secondary-bg">Secondary Accent</button>
        </section>

        <section class="card secondary-bg">
            <h3 class="primary-text">Accent Card (Uses **--color-secondary**)</h3>
            <p>This entire card uses the **Secondary Color** for its background. Notice that the text color (`--color-text`) remains consistent for readability.</p>
        </section>
    </main>

    <script>
        // Updated functional theme combinations (5 colors per theme)
        const THEME_COMBINATIONS = [
            { name: "Minty Fresh", 
              primary: "#85C7B8", secondary: "#C3B6E9", text: "#2c3e50", surface: "#FFFFFF", background: "#F4F8F9" },
            { name: "Peach Blossom", 
              primary: "#FFAD99", secondary: "#FCE6C9", text: "#3c1f1f", surface: "#FFFFFF", background: "#FAF7F0" },
            { name: "Sky Blue Dreams", 
              primary: "#A2CFFE", secondary: "#D1F2FF", text: "#003566", surface: "#FFFFFF", background: "#EFF8FF" },
            { name: "Rose Quartz", 
              primary: "#F7A3BC", secondary: "#EAD2DD", text: "#5D3E56", surface: "#FFFFFF", background: "#FCF0F5" },
            { name: "Lemon Sorbet", 
              primary: "#FFEE93", secondary: "#FDFDAA", text: "#5D4037", surface: "#FFFFFF", background: "#FFFBF2" },
            { name: "Tranquil Teal", 
              primary: "#A8DADC", secondary: "#E7F0C3", text: "#1B4332", surface: "#FFFFFF", background: "#F0F9F9" },
            { name: "Berry Blush", 
              primary: "#E5989B", secondary: "#FCCAD3", text: "#4A0E1D", surface: "#FFFFFF", background: "#FFF5F7" },
            { name: "Mocha Latte", 
              primary: "#DBC8AC", secondary: "#EFE0CD", text: "#3A2F2B", surface: "#FFFFFF", background: "#FDFCF5" },
            { name: "Spring Meadow", 
              primary: "#B6CCFE", secondary: "#C9E4DE", text: "#154360", surface: "#FFFFFF", background: "#F3F7FF" },
            { name: "Violet Haze", 
              primary: "#D4A5A5", secondary: "#F0E5D8", text: "#4A2C3F", surface: "#FFFFFF", background: "#F9F6F4" }
        ];

        const root = document.documentElement;
        const openModalButton = document.getElementById('openThemeModal');

        // Functional color keys for storage and setting CSS properties
        const COLOR_KEYS = ['primary', 'secondary', 'text', 'surface', 'background'];
        
        let activeTheme = { 
            primary: localStorage.getItem('theme-primary') || THEME_COMBINATIONS[0].primary,
            secondary: localStorage.getItem('theme-secondary') || THEME_COMBINATIONS[0].secondary,
            text: localStorage.getItem('theme-text') || THEME_COMBINATIONS[0].text,
            surface: localStorage.getItem('theme-surface') || THEME_COMBINATIONS[0].surface,
            background: localStorage.getItem('theme-background') || THEME_COMBINATIONS[0].background,
        };

        /**
         * Applies colors to CSS variables, updates storage, and reloads the button style.
         */
        function applyTheme(themeColors, save = true) {
            COLOR_KEYS.forEach(key => {
                const colorValue = themeColors[key];
                activeTheme[key] = colorValue;
                root.style.setProperty(`--color-${key}`, colorValue);
                if (save) {
                    localStorage.setItem(`theme-${key}`, colorValue);
                }
            });

            // Update the modal button color to match the new theme's primary color
            openModalButton.style.backgroundColor = activeTheme.primary;
            openModalButton.style.color = activeTheme.text;
        }

        /**
         * Generates the HTML content for the SweetAlert modal.
         */
        function generateThemeGrid() {
            return `
                <p style="font-size: 0.9em; color: #666;">Primary | Secondary | Text | Surface | Background</p>
                <div class="theme-grid">
                    ${THEME_COMBINATIONS.map(theme => `
                        <div 
                            class="theme-option" 
                            data-theme='${JSON.stringify(theme)}'
                            style="background-color: ${theme.surface}; color: ${theme.text}; border-color: ${theme.primary};"
                        >
                            ${theme.name}
                            <div class="color-swatches">
                                <span class="swatch" style="background-color: ${theme.primary};"></span>
                                <span class="swatch" style="background-color: ${theme.secondary};"></span>
                                <span class="swatch" style="background-color: ${theme.text};"></span>
                                <span class="swatch" style="background-color: ${theme.surface};"></span>
                                <span class="swatch" style="background-color: ${theme.background};"></span>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        /**
         * Shows the SweetAlert modal for theme selection.
         */
        function showThemeChooser() {
            Swal.fire({
                title: 'Select a Functional Pastel Theme',
                html: generateThemeGrid(),
                showCancelButton: false,
                showConfirmButton: false,
                focusConfirm: false,
                width: 700,
                didOpen: () => {
                    const grid = document.querySelector('.theme-grid');
                    grid.addEventListener('click', (event) => {
                        const option = event.target.closest('.theme-option');
                        if (option) {
                            const themeData = JSON.parse(option.dataset.theme);

                            // Apply all 5 functional colors
                            applyTheme(themeData);
                            
                            // Highlight selection
                            document.querySelectorAll('.theme-option').forEach(el => el.classList.remove('selected'));
                            option.classList.add('selected');

                            // Close the modal after selection
                            Swal.close();
                        }
                    });
                    
                    // Initial highlight of the currently active theme
                    document.querySelectorAll('.theme-option').forEach(el => {
                        const theme = JSON.parse(el.dataset.theme);
                        if (theme.primary === activeTheme.primary && theme.background === activeTheme.background) {
                            el.classList.add('selected');
                        }
                    });
                }
            });
        }
        
        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            // 1. Apply saved theme on load
            applyTheme(activeTheme, false); // Don't save, just apply from storage/default

            // 2. Set up the button to open the modal
            openModalButton.addEventListener('click', showThemeChooser);
        });

    </script>

</body>
</html>