<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Synchronized Scroll Animation</title>
 
 <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
 
 <style>
  /* =======================================
  GLOBAL STYLES & SCROLL SETUP
  ======================================= */
  body { 
   margin: 0; 
   font-family: sans-serif; 
   background-color: #f4f4f4; 
   /* Total height: 850vh for main animation + 100vh for end-buffer pin */
   height: 950vh; 
  }

  /* The main area that drives the entire animation sequence */
  .scroll-area {
   height: 850vh; 
   position: relative;
  }

  /* Container that holds the elements and sticks to the viewport */
  .sticky-container {
   position: sticky;
   top: 0;
   width: 100%;
   height: 100vh;
   overflow: hidden;
   display: flex;
   justify-content: center;
   align-items: center;
   perspective: 1000px;
  }
  
  /* =======================================
  SCENE 1: IMAGE ARC STYLING (Unchanged)
  ======================================= */
  .header-reveal {
   position: absolute;
   top: 10vh;
   font-family: sans-serif; 
   font-size: 5vw; 
   font-weight: 900;
   color: #000;
   text-align: center;
   width: 100%;
   opacity: 1; 
   z-index: 50; 
   letter-spacing: 0.1em;
   will-change: transform, opacity; 
  }

  .arc-container {
   position: absolute;
   width: 90%; 
   height: 60%; 
   display: flex;
   justify-content: center;
   align-items: center;
   transform-style: preserve-3d;
   will-change: transform;
   top: 55%; 
   transform: translateY(-50%); 
  }

  .arc-image {
   position: absolute;
   width: 220px;
   height: 280px;
   background: #fff;
   box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
   border-radius: 8px;
   overflow: hidden;
   backface-visibility: hidden; 
   will-change: transform, opacity;
  }

  .arc-image img {
   width: 100%;
   height: 100%;
   object-fit: cover;
  }

  .image-1 { transform: translate3d(-500px, 0, 0px) rotateY(30deg); z-index: 10; }
  .image-2 { transform: translate3d(-250px, 0, 10px) rotateY(15deg); z-index: 20; }
  .image-3 { transform: translate3d(0, 0, 20px) rotateY(0deg); z-index: 30; } 
  .image-4 { transform: translate3d(250px, 0, 10px) rotateY(-15deg); z-index: 20; }
  .image-5 { transform: translate3d(500px, 0, 0px) rotateY(-30deg); z-index: 40; } 

  .text-reveal-container {
   position: absolute;
   font-size: 3.5vw;
   font-weight: 800;
   color: #0077b6; 
   text-align: left;
   white-space: nowrap;
   opacity: 0; /* Initially hidden */
   z-index: 30; 
   left: 10%; 
   top: 50%;
   transform: translateY(-50%);
   will-change: opacity, transform;
  }

  .text-reveal-container .word {
   display: inline-block;
   margin-right: 1.5vw;
   transform: translateX(-50px); 
   opacity: 0;
   will-change: transform, opacity;
  }

  /* =======================================
  SCENE 2: MILESTONES STYLING
  ======================================= */
  .milestones-scene {
   position: absolute;
   width: 100%;
   height: 100%;
   display: flex;
   justify-content: center;
   align-items: center;
   /* Initially positioned off-screen to the right */
   transform: translateX(100%); 
   will-change: transform;
   z-index: 60; 
   pointer-events: none;
   background-color: transparent;
  }

  .container {
   max-width: 800px;
   padding: 40px;
   z-index: 10;
   position: relative;
   text-align: center;
  }
  
  .text-container {
   display: flex;
   flex-direction: column;
   align-items: center;
   position: relative;
   z-index: 1; 
  }
  
  .small-text {
   font-size: 1.2rem;
   color: #000;
   margin-bottom: 10px;
   letter-spacing: 2px;
   will-change: transform;
  }
  
  .main-text {
   display: flex;
   align-items: center;
   justify-content: center;
   font-size: 4rem;
   color: #000;
   margin: 20px 0;
   font-weight: 700;
   text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  }
  
  .left-text, .right-text, .sub-text {
   will-change: transform, color; /* Added color for transition */
  }
  
  .maroon-dot {
   display: inline-block;
   width: 12px;
   height: 12px;
   background-image: radial-gradient(circle, #800000 100%, transparent 100%);
   background-color: transparent; 
   border-radius: 50%;
   overflow: visible; 
   mix-blend-mode: normal; 
   z-index: 10; 
   margin: 0 15px;
   opacity: 0; /* Initially hidden */
   position: relative;
   will-change: transform, opacity, scale; 
  }
  
  .sub-text {
   font-size: 1.4rem;
   color: #000;
   margin-top: 10px;
   font-style: italic;
   will-change: transform;
  }
  
  .decoration {
   height: 4px;
   width: 100px;
   background: linear-gradient(to right, transparent, #800000, transparent);
   margin: 30px auto;
  }

  /* =======================================
  SCENE 3: LEGACY/TIMELINE STYLING (The content that needs to be pinned)
  ======================================= */
  .end-buffer {
   height: 100vh; 
   background-color: #800000; 
   position: relative; 
   color: #fff;
   display: flex;
   justify-content: center;
   align-items: center;
   overflow: hidden;
  }
  
  /* Ensure the content is visible *on* the pinned element */
  .end-buffer .container {
   height: 90%; 
   padding: 20px;
   text-align: center;
   display: flex;
   flex-direction: column;
   justify-content: space-around;
   max-width: 90%; 
  }
  
  /* Timeline Styles (Unchanged) */
  .end-buffer .header svg {
   display: block;
   margin: 0 auto;
   max-width: 100%;
   height: 150px;
  }
  
  .timeline-container {
   width: 100%;
   max-width: 800px;
   margin: 80px auto; 
   display: flex;
   justify-content: space-between;
   align-items: center;
   position: relative;
   padding: 0 20px;
  }

  .timeline-line {
   position: absolute;
   top: 50%;
   left: 20px;
   right: 20px;
   height: 4px;
   background: rgba(255, 255, 255, 0.3);
   transform: translateY(-50%);
   z-index: 1;
  }

  .timeline-progress-line {
   position: absolute;
   top: 0;
   left: 0;
   height: 100%;
   width: 0%; 
   background: linear-gradient(to right, #FFA500, #FFD700);
   z-index: 2;
   transition: width 0.3s ease-out;
  }

  .timeline-point {
   width: 20px;
   height: 20px;
   border-radius: 50%;
   background: rgba(255, 255, 255, 0.5); 
   border: 2px solid rgba(255, 255, 255, 0.7);
   position: relative;
   z-index: 3; 
   cursor: default;
   transition: background 0.3s ease, border-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
  }

  .timeline-point.active {
   background: #FFA500; 
   border-color: #FFD700;
   transform: scale(1.2); 
   box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.5); 
  }

  .dynamic-info {
   position: absolute;
   bottom: 45px; 
   left: 50%;
   transform: translateX(-50%);
   width: 150px; 
   text-align: center;
   opacity: 0;
   transition: opacity 0.3s ease;
   pointer-events: none;
  }

  .timeline-point.active .dynamic-info {
   opacity: 1; 
  }

  .dynamic-info .icon-svg {
   display: block;
   margin: 0 auto 5px auto;
   width: 20px; 
   height: 20px;
   fill: #FFD700;
  }

  .dynamic-info .description {
   font-size: 0.8em;
   font-weight: 500;
   color: #FFD700;
   white-space: normal; 
  }
  
  .message-area {
   flex-grow: 1;
   display: flex;
   justify-content: center;
   align-items: center;
   font-size: 1.5rem;
   color: rgba(255, 255, 255, 0.6);
   padding: 20px;
  }
  
  .status { 
   font-size: 1.2rem; 
   color: #FFA500; 
   min-height: 25px; 
   font-weight: 600;
   visibility: hidden;
  }

  .footer {
   padding-top: 10px;
   border-top: 1px solid rgba(255, 255, 255, 0.2);
   font-size: 0.8rem;
   color: rgba(255, 255, 255, 0.7);
  }
 </style>
</head>
<body>

 <section class="scroll-area">
  <div class="sticky-container">
   
   <h1 class="header-reveal">OUR TALENTED STUDENTS</h1>
   <div class="text-reveal-container scene1-text">
    <span class="word">Excellence</span>
    <span class="word">beyond</span>
    <span class="word">the</span>
    <span class="word">boundaries</span>
   </div>

   <div class="arc-container">
    <div class="arc-image image-1"><img src="https://picsum.photos/id/10/200/300" alt="Photo 1"></div>
    <div class="arc-image image-2"><img src="https://picsum.photos/id/20/200/300" alt="Photo 2"></div>
    <div class="arc-image image-3"><img src="https://picsum.photos/id/30/200/300" alt="Photo 3"></div>
    <div class="arc-image image-4"><img src="https://picsum.photos/id/40/200/300" alt="Photo 4"></div>
    <div class="arc-image image-5 last-image"><img src="https://picsum.photos/id/50/200/300" alt="Photo 5"></div>
   </div>
   
   <div class="milestones-scene">
    <div class="container">
     <div class="text-container">
      <p class="small-text scene2-small-text">a little steps</p>
      <div class="main-text">
       <span class="left-text scene2-left-text">setting</span>
       <span class="maroon-dot" id="animatedDot"></span>
       <span class="right-text scene2-right-text">milestones</span>
      </div>
      <p class="sub-text scene2-sub-text">in education standards</p>
     </div>
     <div class="decoration"></div>
    </div>
   </div>
  </div>
 </section>

  <div class="end-buffer" id="legacySection">
   <div class="container">
     <div class="header">
       <svg width="600" height="180" viewBox="0 0 600 180" xmlns="http://www.w3.org/2000/svg">
         <defs>
           <linearGradient id="creamGradient" x1="0%" y1="0%" x2="100%" y2="0%">
             <stop offset="0%" style="stop-color:#FFFFFF;stop-opacity:1" />
             <stop offset="100%" style="stop-color:#FFFDD0;stop-opacity:1" />
           </linearGradient>
           
           <clipPath id="numbersClip">
             <text x="50" y="80" font-family="Arial" font-size="80" font-weight="bold">53</text>
           </clipPath>
         </defs>
         
         <text x="50" y="80" font-family="Arial" font-size="80" font-weight="bold" 
           fill="none" stroke="rgba(255,255,255,0.3)" stroke-width="2">
           53
         </text>

         <text x="190" y="80" font-family="Arial" font-size="45" font-weight="normal"
           fill="none" stroke="rgba(255,255,255,0.3)" stroke-width="1.5">
           years of legacy
         </text>

         <text x="50" y="130" font-family="Arial" font-size="25" fill="none" 
           stroke="rgba(255,255,255,0.2)" stroke-width="1">
           what led us so far
         </text>
         
         <rect x="0" y="180" width="600" height="180" fill="url(#creamGradient)" 
           clip-path="url(#numbersClip)">
           <animate attributeName="y" from="180" to="0" dur="2s" begin="0.5s" fill="freeze"/>
           <animate attributeName="height" from="180" to="180" dur="2s" begin="0.5s" fill="freeze"/>
         </rect>

         <text x="190" y="80" font-family="Arial" font-size="45" font-weight="normal" 
           fill="url(#creamGradient)" opacity="0">
           years of legacy
           <animate attributeName="opacity" from="0" to="1" dur="0.5s" begin="1s" fill="freeze"/>
         </text>

         <text x="50" y="130" font-family="Arial" font-size="25" fill="#FFFDD0" opacity="0">
           what led us so far
           <animate attributeName="opacity" from="0" to="1" dur="0.5s" begin="2.5s" fill="freeze"/>
         </text>
         
         <circle cx="200" cy="75" r="0" fill="none" stroke="rgba(255,255,255,0.5)" stroke-width="2">
           <animate attributeName="r" from="0" to="100" dur="1s" begin="2s" fill="freeze"/>
           <animate attributeName="opacity" from="1" to="0" dur="1s" begin="2s" fill="freeze"/>
         </circle>
       </svg>
     </div>
     
     <div class="timeline-container">
       <div class="timeline-line">
         <div class="timeline-progress-line" id="timelineProgressBar"></div>
       </div>
       
       <div class="timeline-point" data-index="0">
         <div class="dynamic-info">
           <svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 2L2 21h20L12 2zm0 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"/></svg>
           <span class="description">Our journey begins.</span>
         </div>
       </div>

       <div class="timeline-point" data-index="1">
         <div class="dynamic-info">
           <svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
           <span class="description">Nurturing growth & support.</span>
         </div>
       </div>

       <div class="timeline-point" data-index="2">
         <div class="dynamic-info">
           <svg class="icon-svg" viewBox="0 0 24 24"><path d="M16 11V3H8v8H2v10h20V11h-6zm-4 9H9v-2h3v2zm0-4H9v-2h3v2zm0-4H9v-2h3v2zm5 8h-3v-2h3v2zm0-4h-3v-2h3v2zm0-4h-3v-2h3v2z"/></svg>
           <span class="description">Achieving high standards.</span>
         </div>
       </div>

       <div class="timeline-point" data-index="3">
         <div class="dynamic-info">
           <svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-1 6h2v6h-2V7zm0 8h2v2h-2v-2z"/></svg>
           <span class="description">Honesty and strong ethics.</span>
         </div>
       </div>

       <div class="timeline-point" data-index="4">
         <div class="dynamic-info">
           <svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 2c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 16H8v-8h3v8zm4 0h-3v-8h3v8z"/></svg>
           <span class="description">Persistence is our destiny.</span>
         </div>
       </div>
     </div>

     <div class="message-area">
       Scroll to see our values sequence!
     </div>

     <div class="status" id="statusBlock">Simulated scroll progress: 0%</div>

     <div class="footer">
       &copy; 2025 Educational Legacy Institute. All rights reserved.
     </div>
   </div>

   <script>
     // Timeline/Wheel Scroll Logic (Unchanged from previous version)
     const timelinePoints = document.querySelectorAll('.timeline-point');
     const timelineProgressBar = document.getElementById('timelineProgressBar');
     const numPoints = timelinePoints.length; 
     const maxScroll = 100; 
     const scrollStep = 10; 
     const statusBlock = document.getElementById('statusBlock'); 

     let currentProgress = 0;

     function updateTimeline() {
       timelineProgressBar.style.width = currentProgress + '%';
       statusBlock.textContent = 'Simulated scroll progress: ' + Math.round(currentProgress) + '%';
       
       const numSegments = numPoints - 1; 
       const segmentSize = maxScroll / numSegments; 
       
       let activePointIndex = Math.floor(currentProgress / segmentSize);
       activePointIndex = Math.max(0, Math.min(activePointIndex, numSegments));

       timelinePoints.forEach((point, index) => {
         if (index <= activePointIndex) {
           point.classList.add('active');
         } else {
           point.classList.remove('active');
         }
       });
     }

     // *** Crucial: The wheel listener must only run when the end-buffer is pinned ***
     // We will use a GSAP callback to enable/disable the wheel listener.
     let wheelEnabled = false;

     document.addEventListener('wheel', (event) => {
       
       if (!wheelEnabled) return; // Prevent scrolling if not pinned

       event.preventDefault(); // Stop main page scroll when engaged

       const direction = event.deltaY > 0 ? 1 : -1; 

       let newProgress = currentProgress + (direction * scrollStep);
       newProgress = Math.max(0, Math.min(maxScroll, newProgress));

       if (newProgress !== currentProgress) {
         currentProgress = newProgress;
         updateTimeline();
       }
     });

     updateTimeline();
   </script>
 </div>
 

 <script>
  gsap.registerPlugin(ScrollTrigger);

  // --- Scene 1 Variables ---
  const targetX = 500; 
  const dx1_to_target = targetX - (-500); // 1000
  const dx2_to_target = targetX - (-250); // 750
  const dx3_to_target = targetX - 0;  // 500
  const dx4_to_target = targetX - 250;  // 250

  // --- Scene 2 Variables ---
  const maxDistance = 60; // Max separation for text elements
  const maxScale = 600; 

  // 1. Main Animation Timeline (Scrolls the first 850vh)
  let tl = gsap.timeline({
   scrollTrigger: {
    trigger: ".scroll-area", 
    start: "top top", 
    // Duration of the animation phase (8.5 units)
    end: "+=8500", 
    scrub: 1,  
    pin: ".sticky-container" 
   }
  });

  // PHASE 1: SCENE 1 (IMAGES/ARC) ANIMATION (0.0 - 1.5)
  tl.to(".header-reveal", { opacity: 0, y: -50, duration: 0.5, ease: "power1.in" }, 0) 
  tl.to(".image-1", { x: dx1_to_target, rotationY: 0, z: -10, opacity: 0, ease: "power1.inOut" }, 0) 
  tl.to(".image-2", { x: dx2_to_target, rotationY: 0, z: -20, opacity: 0, ease: "power1.inOut" }, 0)
  tl.to(".image-3", { x: dx3_to_target, rotationY: 0, z: -30, opacity: 0, ease: "power1.inOut" }, 0)
  tl.to(".image-4", { x: dx4_to_target, rotationY: 0, z: -40, opacity: 0, ease: "power1.inOut" }, 0)
  tl.to(".image-5", { rotationY: 0, z: 0, ease: "power1.inOut" }, 0) 
  tl.to(".arc-container", { x: "10%", opacity: 0, ease: "power2.inOut", duration: 1.0 }, 0)
  tl.to(".text-reveal-container", { opacity: 1, duration: 0.5 }, 0.5) 
  tl.to(".text-reveal-container .word", { x: 0, opacity: 1, stagger: 0.15, duration: 0.5, ease: "power2.out" }, 0.5)
  tl.to(".scene1-text", { x: -200, opacity: 0, duration: 0.5, ease: "power2.in" }, 1.0) 

  // PHASE 2: SCENE 2 (MILESTONES) ANIMATION (1.5 - 6.5)
  tl.to(".milestones-scene", { x: "0%", duration: 0.5, ease: "power2.out" }, 1.5)
  tl.to(".scene2-small-text", { x: -maxDistance, duration: 1.0, ease: "power1.inOut" }, 2.0)
  tl.to(".scene2-left-text", { x: -maxDistance, duration: 1.0, ease: "power1.inOut" }, 2.0)
  tl.to(".scene2-right-text", { x: maxDistance, duration: 1.0, ease: "power1.inOut" }, 2.0)
  tl.to(".scene2-sub-text", { x: maxDistance, duration: 1.0, ease: "power1.inOut" }, 2.0)
  tl.to("#animatedDot", { opacity: 1, duration: 0.5, ease: "power2.out" }, 3.0)
  tl.to("#animatedDot", { scale: maxScale, duration: 0.5, ease: "power2.in" }, 3.5)
  tl.to(".scene2-small-text", { x: 0, color: "#fff", duration: 0.5, ease: "power2.out" }, 4.0)
  tl.to(".scene2-left-text", { x: 0, color: "#fff", duration: 0.5, ease: "power2.out" }, 4.0)
  tl.to(".scene2-right-text", { x: 0, color: "#fff", duration: 0.5, ease: "power2.out" }, 4.0)
  tl.to(".scene2-sub-text", { x: 0, color: "#fff", duration: 0.5, ease: "power2.out" }, 4.0)
  
  // Exit the milestone scene, revealing the end-buffer 
  tl.to(".milestones-scene", { x: "-100%", duration: 0.5, ease: "power2.in" }, 6.5)

  // Hold the pin for 1.5s (until time 8.0) to fully ensure the transition completes
  // The final pin release is handled by the end of the scroll-area (8.5s)
  tl.to({}, {duration: 2.0}, 6.5) 
  
  
  // 2. New ScrollTrigger for the End-Buffer Pinning
  ScrollTrigger.create({
   trigger: "#legacySection", // The end-buffer div
   start: "top bottom", 
   end: "+=1000", // Pins for the equivalent of 100vh
   pin: true, 
   pinSpacing: false,
   // When the end-buffer starts pinning, enable the custom wheel scroll logic
   onEnter: () => { wheelEnabled = true; },
   // When the pin is released, disable the custom wheel scroll logic
   onLeave: () => { wheelEnabled = false; },
   onLeaveBack: () => { wheelEnabled = false; },
  });
  
 </script>
</body>
</html>